<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Chat APP</h1>
    <div>
        Username : <input type="text" class="username">
    </div>
    <br><br>
    <div>
        <textarea name="" class="input"></textarea><br><br>
        <button type="button" class="submitBtn">SEND</button>
    </div>
    <div class="allMsg"></div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        let submitBtn = document.querySelector(".submitBtn");
        let input = document.querySelector(".input");
        let allMsg = document.querySelector(".allMsg");
        let usernameField = document.querySelector(".username");

        socket.on("connect", ()=>{
            socket.emit("joinRoom", "room9892")
        })

        submitBtn.addEventListener("click", (e)=>{
            let value = input.value

            socket.emit("userMsg", value, usernameField.value);

            input.value = ""
        })

        socket.on("serverMsg", (msg, username)=>{
            allMsg.insertAdjacentHTML("beforeend", `<p>${username} : ${msg}</p>`)
        })
        
        
        

        // socket.on("connect", ()=>{
        //     socket.emit('joinRoom', "room1", socket.id);
        // })

        // submitBtn.addEventListener("click", (e)=>{
        //     let msg = input.value;
        //     let username = usernameField.value;
        //     input.value = ""
        //     socket.emit("chatMessage", msg, "room1", username)
        // })

        // socket.on("serverMsg", (msg, username)=>{
        //     let temp = `
        //         <p>${username} : ${msg}</p>
        //     `;

        //     console.log("Msg Received : " + msg)

        //     allMsg.insertAdjacentHTML("beforeend", temp);
        // })
        
    </script>
</body>

</html>